{#レイアウトを継承します#}
{% extends "layout/layout.twig" %}

{#HTMLのタイトルを定義します。#}
{% block title %}{{event.title}}{% endblock %}

{# 適用させたいスタイルシートのパスを指定します #}
{% block header_scripts_add %}
{% endblock %}

{#ここから表示したい情報を記載します。#}
{% block page_content %}
    <link href="/assets/css/event/show.css" rel="stylesheet">
    <link href="/assets/css/common.css" rel="stylesheet">
    <div class="page-header text-center user-show-header">
        <h1 class="head_test">{{event.title}}</h1>
    </div>

    <div class="container user-show">

                {% if owner.github_id is null %}
                {% else %}
                    <a href="https://github.com/{{owner.github_id}}" target='_blank'>
                        <div class='github btn'>
                            <i class="fa fa-github"></i> {{owner.github_id}}
                        </div>
                    </a>
                {% endif %}
            </p>

            <p class='categories'>
                <div class="postit">タグ</div><br>
                {% for category in event.categories | split(', ') %}
                    <span class='btn category'>{{category}}</span>
                {% endfor %}
            </p>
            <br />

            <p class="postit">詳細</p>
            <div class='detail mt-2 mb-2'>
                {{event.detail}}
            </div>

            <p class="postit">チャット</p>
            <center><a href="/event/{{event.id}}" class="square_btn39">最新の状態に更新する</a></center><br>
            <div class="chat">
                {% for message in messages %}
                    <!-- TODO currentuserなら <div class="kaiwa-text-right">-->
                    <div class="kaiwa">
                        {% if currentUser.id == message.user_id %}
                            <div class="kaiwa-text-left">
                                <p class="kaiwa-text">
                                    {{message.content}}
                                </p>
                            </div>
                        {% else %}
                            <div class="kaiwa-text-right">
                                <p class="kaiwa-text">
                                    {{message.content}}
                                </p>
                            </div>
                        {% endif %}
                    </div>
                {% endfor %}
            </div>

            <div class='panel-footer schedule-action text-center'>
                <form id="newChatContentForm" method="POST" action="/event/{{event.id}}/chat/">
                    <input name="content" type='text' placeholder='メッセージ内容'>
                    <button type='submit'class='btn-submit'>メッセージを送る</button>
                </form>
            </div>
        </div>
    {# </div> #}

    <div class='col-sm-3 right-container'>
        <div class="panel panel-default date">
            <div class="panel-heading">
                開催期間
            </div>
        <div class="panel-body ">
        <p>開始時間<br />{{event.startDate}}</p>
        <p>終了予定時間<br />{{event.endDate}}</p>
    </div>

        <div class='panel-footer schedule-action text-center'>
            {% if isJoin == true %}
                <p><button class='btn-submit'>欠席する</button></p>
            {% else %}
                <p>
                    <form id="participateForm" method="POST" action="/event/{{event.id}}/participate/">
                        <!-- <input type="hidden"  name="participate" id="participate" value="1" checked> -->
                        <button type="submit"class='btn-submit'>参加する</button>
                    </form>
                </p>
            {% endif %}
        </div>


        <div class="panel panel-default date">
            <div class="panel-heading">
                参加者
            </div>

            <div class="panel-body ">
                {% for user in users %}
                    {% if user.twitter_id is null %}
                        {# TODO user/{id} にとばしたい π#}
                        <span class='btn category'>{{user.name}}</span>
                    {% else %}
                        <a class='btn category' href="https://twitter.com/{{user.twitter_id}}" target='_blank'>
                            <i class="fa fa-twitter-square"></i>{{user.twitter_id}}
                        </a>
                    {% endif %}
                {% endfor %}
            </div>
        </div>
    </div>
    <div class="row col-sm-1"></div>
    </div>
</div>
{% endblock %}

{#共通フッタとして追記したい情報を記載します。#}
{% block footer_scripts_add %}{% endblock %}
